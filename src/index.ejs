<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title><%= htmlWebpackPlugin.options.title %></title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>

    <div id="mount"></div>

    <script>
        const q = {};

        function desanitize(path) {
            return path.replace(/~and~/g, "&")
        }

        if(!location.search) {
            return;
        }

        location.search.slice(1).split("&").forEach(function(params) {
            const [ key, value ] = params.split("=");

            q[key] = desanitize(value);
        });

        if(q.p === undefined) {
            return;
        }

        history.replaceState(null, null,
            location.pathname.slice(0, -1) + (q.p || "") +
            (q.q ? ("?" + q.q) : "") +
            location.hash
        );

        const ver = <%= JSON.stringify(htmlWebpackPlugin.options.ver) %>;
    </script>

</body>
</html>
